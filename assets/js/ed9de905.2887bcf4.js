"use strict";(self.webpackChunkpterodocs=self.webpackChunkpterodocs||[]).push([[488],{1411:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/install-script-tab-8cadcabb2af438883094ab176c5a6791.png"},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>o});var i=s(6540);const r={},t=i.createContext(r);function l(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(t.Provider,{value:n},e.children)}},9613:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"egg-basics/install-script","title":"Install Script","description":"The install script is where the egg magic happens.","source":"@site/docs/egg-basics/install-script.md","sourceDirName":"egg-basics","slug":"/egg-basics/install-script","permalink":"/eggdocs/docs/egg-basics/install-script","draft":false,"unlisted":false,"editUrl":"https://github.com/Ptero-Egg-Docs/eggdocs/tree/master/docs/egg-basics/install-script.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"basicSidebar","previous":{"title":"Egg Variables","permalink":"/eggdocs/docs/egg-basics/egg-variables"}}');var r=s(4848),t=s(8453);const l={sidebar_position:4},o="Install Script",a={},c=[{value:"How It Works",id:"how-it-works",level:2},{value:"What Happens After Installation?",id:"what-happens-after-installation",level:3},{value:"Example Install Script",id:"example-install-script",level:2},{value:"Notes",id:"notes",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"install-script",children:"Install Script"})}),"\n",(0,r.jsxs)(n.p,{children:["The install script is where the ",(0,r.jsx)(n.strong,{children:"egg magic"})," happens."]}),"\n",(0,r.jsxs)(n.p,{children:["Here, you define the commands that run during the ",(0,r.jsx)(n.strong,{children:"installation phase"})," to set up the environment, download necessary files, and prepare everything your application or game needs to run in the ",(0,r.jsx)(n.a,{href:"/eggdocs/docs/egg-basics/egg-components#docker-images",children:"runtime Docker image"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["You can choose a special Docker image for the installation process (separate from the server\u2019s runtime image). Pterodactyl provides some \u201cinstaller\u201d images (Alpine or Debian based) that include common utilities like ",(0,r.jsx)(n.code,{children:"curl"}),", ",(0,r.jsx)(n.code,{children:"wget"}),", ",(0,r.jsx)(n.code,{children:"unzip"}),", ",(0,r.jsx)(n.code,{children:"git"}),", etc., to help with installation tasks. If you\u2019re not sure, use one of the official installer images:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"ghcr.io/ptero-eggs/installers:alpine"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"ghcr.io/ptero-eggs/installers:debian"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"ghcr.io/ptero-eggs/installers:ubuntu"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Install Script",src:s(1411).A+"",width:"1678",height:"672"})}),"\n",(0,r.jsx)(n.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,r.jsxs)(n.admonition,{type:"caution",children:[(0,r.jsx)(n.mdxAdmonitionTitle,{}),(0,r.jsxs)(n.p,{children:["Anything installed ",(0,r.jsx)(n.strong,{children:"outside"})," ",(0,r.jsx)(n.code,{children:"/mnt/server"})," (e.g., system packages installed with ",(0,r.jsx)(n.code,{children:"apt"}),", ",(0,r.jsx)(n.code,{children:"apk"}),", or ",(0,r.jsx)(n.code,{children:"yum"}),") ",(0,r.jsx)(n.strong,{children:"will not persist"})," into the runtime container. If your application needs specific system dependencies, they must be included in the ",(0,r.jsx)(n.strong,{children:"runtime Docker image"}),"."]})]}),"\n",(0,r.jsxs)(n.p,{children:["When an egg is deployed, the install script runs ",(0,r.jsx)(n.strong,{children:"inside a temporary install container"}),", which is separate from the actual runtime environment. This script is responsible for:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Create the server directory:"})," The script typically starts by making sure the ",(0,r.jsx)(n.code,{children:"/mnt/server"})," directory exists and is the current working directory."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["For example, you might use:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"mkdir -p /mnt/server\ncd /mnt/server\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["(In many official scripts, the container\u2019s working directory is already set to ",(0,r.jsx)(n.code,{children:"/mnt/server"}),", but it\u2019s good practice to ensure it.)"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Download and prepare files:"})," Fetch any necessary files (server binaries, mods, configs, etc.) from the internet or local sources."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Common tools for this are ",(0,r.jsx)(n.code,{children:"curl"}),", ",(0,r.jsx)(n.code,{children:"wget"}),", ",(0,r.jsx)(n.code,{children:"git clone"}),", or using a command pipeline like ",(0,r.jsx)(n.code,{children:"curl ... | tar ..."}),"."]}),"\n",(0,r.jsx)(n.li,{children:"For example, you might download a ZIP of the server software and then unzip it."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Set up configurations:"})," If your server requires an initial configuration file or certain directory structure, you can create those here."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"For instance, you might generate a default config file, or rename files, etc."}),"\n",(0,r.jsxs)(n.li,{children:["You can also use the values of variables by referencing environment variables (e.g. ",(0,r.jsx)(n.code,{children:"${MAX_PLAYERS}"})," in the script will use the value from a custom egg variable if one exists)."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Install any additional dependencies (if needed for installation):"})," In some cases, the install process itself might require extra tools or packages. Since the official installer images come with common tools, this is rarely needed, but you could install others (e.g., ",(0,r.jsx)(n.code,{children:"apk add ..."})," or ",(0,r.jsx)(n.code,{children:"apt install ..."}),") in the install container. Remember, these tools won\u2019t be present in the runtime container, so this step is only for things needed ",(0,r.jsx)(n.em,{children:"during installation"})," (not for actually running the server)."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"what-happens-after-installation",children:"What Happens After Installation?"}),"\n",(0,r.jsx)(n.p,{children:"Once the install script finishes:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Everything inside ",(0,r.jsx)(n.code,{children:"/mnt/server"})," is moved to the ",(0,r.jsx)(n.strong,{children:"persistent storage volume"})," of the server container."]}),"\n",(0,r.jsx)(n.li,{children:"The runtime container (running a different Docker image) will then start and use these files."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"example-install-script",children:"Example Install Script"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'#!/bin/bash\n# Create and navigate to the server directory\nmkdir -p /mnt/server\ncd /mnt/server || exit 1\n\n# Install dependencies required for installation\napt update && apt install -y unzip wget\n\n# Download necessary files\nwget -O game-server.zip "https://example.com/game-server.zip"\nunzip game-server.zip\nrm game-server.zip\n\n# Set up configuration\necho "max_players=32" > config.cfg\n\n# Ensure correct permissions\nchown -R containeruser:containergroup /mnt/server\nchmod -R 755 /mnt/server\n'})}),"\n",(0,r.jsx)(n.h3,{id:"notes",children:"Notes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:["Only files inside ",(0,r.jsx)(n.code,{children:"/mnt/server"})," persist"]})," into the runtime container."]}),"\n",(0,r.jsxs)(n.li,{children:["Any ",(0,r.jsxs)(n.strong,{children:["system packages installed during this phase (e.g., ",(0,r.jsx)(n.code,{children:"apt install git"}),") will not be available in the runtime container"]})," unless the runtime image includes them."]}),"\n",(0,r.jsx)(n.li,{children:"If your application requires extracted files, then it's best to clean up any unnecessary archives afterward."}),"\n",(0,r.jsx)(n.li,{children:"Permissions should be adjusted properly so that the runtime container can access the files."}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);